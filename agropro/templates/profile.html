{% load static %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>AgroPro</title>
    <link rel="icon" href=" {% static 'images/logo.png' %}" type="image/icon type">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Playwrite+AU+SA:wght@100..400&family=Raleway:ital,wght@0,100..900;1,100..900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap');
      @import url('https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible+Next:ital,wght@0,200..800;1,200..800&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    
body {
  background: url('https://plus.unsplash.com/premium_photo-1664365805235-c5b33fb82b2a?q=80&w=3540&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') no-repeat center center fixed;
    background-size: cover;
  width: 100vw;
  height: 100vh;
  display: grid;
  {% comment %} align-items: center;
  justify-items: center; {% endcomment %}
  background-attachment: fixed;
}

.contact-us {
  background: brown;
  padding: 50px 100px;
  border: 2px solid rgba(0,0,0,1);
  box-shadow: 15px 15px 1px #ffa580, 15px 15px 1px 2px rgba(0,0,0,1);
}

input {
  display: flex;
  width: 50%;
  font-size: 10pt;
  line-height: 28pt;
  font-family: "Atkinson Hyperlegible Next", sans-serif;
  margin-bottom: 5pt;
  border: none;
  min-width: 250px;
  padding-left: 5px;
  outline: none;
  color: rgba(0,0,0,1);
}

input:focus {
  border-bottom: 5px solid black;
}

{% comment %} button {
  display: block;
  margin: 0 auto;
  line-height: 28pt;
  padding: 0 20px;
  background-color: #ffa580;
  letter-spacing: 2px;
  transition: .2s all ease-in-out;
  outline: none;
  border: 1px solid rgba(0,0,0,1);
  box-shadow: 3px 3px 1px 1px #95a4ff, 3px 3px 1px 2px rgba(0,0,0,1);
}

button:hover {
  background: rgba(0,0,0,1);
  color: white;
  border: 1px solid rgba(0,0,0,1);
} {% endcomment %}

::selection {
  background: light blue;
}

input:-webkit-autofill,
input:-webkit-autofill:hover, 
input:-webkit-autofill:focus {
  border-bottom: 5px solid #95a4ff;
  -webkit-text-fill-color: #2A293E;
  -webkit-box-shadow: 0 0 0px 1000px #f8f4e5 inset;
  transition: background-color 5000s ease-in-out 0s;
}
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark sticky-top">
      <a href="/" class="navbar-brand">
        <img src="{% static 'images/logo1.png' %}" height="28" alt="">
    </a>
    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarCollapse">
      <div class="navbar-nav">
        <a href="/" class="nav-item nav-link active" style="color:black">Home</a>
        {% if username is not None %}
            {% if utype == "farmer" %}
            <a href="{%url 'predict_soil' %}" class="nav-item nav-link active" style="color:black">Soil Type Identification</a>
            {% endif %}
            {% if utype == 'wholesaler' %}
              
            {% endif %}
          {% endif %}
          {% if username is not None %}
            {% if utype == "farmer" %}
             <a href="{% url 'prediction'%}" class="nav-item nav-link" style="color:black">Crop Recommendation</a>
            {% endif %}
            {% if utype == 'wholesaler' %}
              <a href="{% url 'market'%}" class="nav-item nav-link" style="color:black">Farmer's Market</a>
            {% endif %}
          {% endif %}
          {% if username is not None %}
            {% if utype == "farmer" %}
            <a href="{% url 'blog' %}" class="nav-item nav-link" style="color:black">Blogs</a>
            {% endif %}
            {% if utype == 'wholesaler' %}
            <a href="{% url 'blogs' %}" class="nav-item nav-link" style="color:black">Blogs</a>
            {% endif %}
          {% endif %}
          {% comment %} <a href="/farmer/blog" class="nav-item nav-link active" style="color:black">Blogs</a> {% endcomment %}
      </div>
  <div class="navbar-nav ml-auto">
    <div class="nav-item dropdown" style="color:black">
      <a href="#" style="color:black" class="nav-link dropdown-toggle user-action" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <img src="https://i.pinimg.com/736x/5f/fe/c0/5ffec07ae6b545b6a22ae2a72801756e.jpg" class="avatar" alt="Avatar" style="height: 30px;width: 30px;border-radius:50%;">
        {{ username }} <b class="caret"></b>
      </a>
      
      <div class="dropdown-menu">
        {% if username is not None %}
            {% if utype == "farmer" %}
            <a href="{% url 'profile' %}" class="dropdown-item"><i class="bi bi-person-square"></i> Profile</a>
            {% endif %}
            {% if utype == 'wholesaler' %}
            <a href="{% url 'profiles' %}" class="dropdown-item"><i class="bi bi-person-square"></i> Profile</a>
            {% endif %}
          {% endif %}
        {% comment %} <a href="/farmer/profile" class="dropdown-item"><i class="fa fa-user-o"></i> Profile</a> {% endcomment %}
        <a href="/{{ utype }}/notifications" class="dropdown-item"><i class="fa fa-envelope"></i> Notifications</a>
        {% comment %} <a href="/farmer/notifications" class="dropdown-item"><i class="fa fa-envelope"></i> Notifications</a> {% endcomment %}
        <div class="dropdown-divider"></div>
        <form method="post" action="/logout">
          {% csrf_token %}
          <button class="dropdown-item">
            <i class="fa fa-sign-out"></i> Logout
          </button>
        </form> 
      </div>
    </div>
  </div>
    <div><p style="visibility:hidden;">hi</p></div>
  </div>
</nav>
<div class="container">
  <div class="row">
    <div class="col-md-12">
    <div class="row">
      <div class="col-md-3 p-3" style="position: fixed;left:0%;width: 25%;top:50px;height: 100%;">
      <form>
      <br><img src="https://i.pinimg.com/736x/5f/fe/c0/5ffec07ae6b545b6a22ae2a72801756e.jpg" 
      class="avatar img-circle img-thumbnail" 
      alt="avatar" 
      style="display: block; margin-left: auto; margin-right: auto; border-radius: 50%; width: 200px; height: 200px;">
 
      <h4 class="text-center" style="font-weight: 600; margin-top: 10px; font-family: 'Ubuntu', serif; color: white;">
        Hello, {{instance.name}}
    </h4>
    

      <div class="form-row">
      {% comment %} <div class="col offset-md-2 mb-3">
      <input type="file" class="file-upload">
      </div> {% endcomment %}
      </div>
      <div class="form-row">
        <div class="col mb-3">
          <label for="description" style="color: black;">About yourself</label>
          <textarea class="form-control" id="description" placeholder="Description" rows="6"></textarea>
        </div>
      </div>
      <div class="text-center">
      <button class="btn btn-primary" type="submit" style="background-color: #6D2932;border: 1px solid #561C24;">Save</button>
      <button class="btn btn-light" type="submit">reset</button>
    </div>
      </form>
    </div>
    <div class="col-md-9 offset-md-3">
        <form action = '/farmer/editProfile' method = 'POST'>
          {% csrf_token %}
        <br><h2>Personal Info</h2>
        
        <br><div class="form-row">
        <div class="col-md-4 mb-3">
      <label for="firstname">Full Name</label>
      <input type="text" class="form-control" id="firstname" placeholder="Full Name" name = 'name' value="{{instance.name}}" required disabled>
    </div>
    <div class="col-md-4 mb-3">
      <label for="username">Username</label>
        <input type="text" class="form-control" id="username" placeholder="Username" name = 'username' value = '{{instance.username}}'required disabled>
    </div>
  </div>
  <div class="form-row">
    <div class="col-md-6 mb-3">
    <label for="email">Email</label>
    <input type="email" class="form-control" id="email" placeholder="Email" name = 'email' value='{{instance.email}}' required disabled>
    </div>
    <div class="col-md-6 mb-3">
    <label for="phoneno">Phone No.</label>
    <input type="text" class="form-control" id="Phoneno" placeholder="Phone No." name = 'phone' value='{{instance.phone}}' required disabled>
    </div>
  </div>
  <div class="form-row">
    <div class="col mb-3">
      <label for="address">Address</label>
      <input type="text" class="form-control" id="address" placeholder="Address" name = 'address' value='{{instance.address}}' require disabled>
    </div>
  </div>
  <div class="form-row">
    <div class="col-md-3 mb-3">
      <label for="state">State</label>
      <input type="text" class="form-control" id="state" placeholder="State" name = 'state' value='{{instance.state}}' required disabled>
    </div>
    <div class="col-md-3 mb-3">
      <label for="area">Farm Area</label>
      <input type="number" class="form-control" id="area" placeholder="" name = 'area' value='{{instance.area}}' required disabled>
    </div>
  </div>
  
  <button class="btn btn-primary" type="submit" id = 'profileSubmit' style="background-color: #561C24;border: 1px solid #561C24;" disabled>Save</button>
  
</form> 
<button class="btn btn-light" onclick="editField()" id = 'editBtn' style="transform: translate(5rem,-2.3rem);">Edit</button>
  <br><hr style="color:gray;background-color:gray;">
  
  <br><h2>Current Crop Info</h2>
   
  {% comment %} <div id = "outputDiv" style="display: grid;grid-template-columns: repeat(2,0.5fr);padding-top:2rem;">
  {% for item in crops %}
  <div style="background-color: white;width: 20rem;height:15rem;margin-bottom: 5rem;color:black;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.5), 0 6px 20px 0 rgba(0, 0, 0, 0.5);">
    <div class="innerDiv" style="padding:2rem;padding-left:3rem ;">
      <p><strong>Crop:</strong> {{item.name}}</p>
    <p><strong>Production:</strong> {{item.quantity}}</p>
    <p><strong>Price(Assumption):</strong> {{item.price}}</p>
    <p><strong>Started:</strong> {{item.created  | date:"F d Y" }}</p>
    <div style="align-items: center; transform: translate(4.5rem,0rem);">
      <form action = "/farmer/removeCrop/{{item.id}}" method = "POST">
        {% csrf_token %}
        <button type="button" class="btn btn-primary">Remove</button>
      </form>
      
    </div>
    </div>
    
    </div> {% endcomment %}
    {% comment %} <div id="outputDiv" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; padding-top: 2rem;">
      {% for item in crops %}
      <div style="background: #ffffff; width: 100%; max-width: 350px; padding: 1.5rem; 
                  border-radius: 12px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15); text-align: left; transition: transform 0.2s ease-in-out;">
        
        <div class="innerDiv" style="padding: 1rem;">
          <h4 style="color: #333; font-weight: 600; margin-bottom: 0.5rem;">{{ item.name }}</h4>
          <hr style="border-top: 1px solid #ddd; margin: 0.5rem 0;">
          <p style="color: #555; font-size: 1rem;"><strong>Production:</strong> {{ item.quantity }}</p>
          <p style="color: #555; font-size: 1rem;"><strong>Price (Estimate):</strong> {{ item.price }}</p>
          <p style="color: #555; font-size: 1rem;"><strong>Started:</strong> {{ item.created | date:"F d, Y" }}</p>
          
          <div style="margin-top: 1rem;">
            <form action="/farmer/removeCrop/{{ item.id }}" method="POST">
              {% csrf_token %}
              <button type="submit" class="btn btn-danger" 
                      style="width: 100%; padding: 0.6rem; border-radius: 6px; font-weight: 500; background-color: #d9534f; border: none;">
                Remove
              </button>
            </form>
          </div>
        </div>
      </div> {% endcomment %}
      <div id="outputDiv" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; padding-top: 2rem;">
        {% for item in crops %}
        <div style="background: #ffffff; width: 100%; max-width: 350px; padding: 1.5rem; 
                    border-radius: 12px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15); text-align: center; 
                    transition: transform 0.2s ease-in-out; overflow: hidden;">
          
          <!-- Circular Image -->
          {% comment %} <div style="display: flex; justify-content: center; margin-bottom: 1rem;">
            <img src="{{ item.image_url }}" alt="{{ item.name }}" 
                 style="width: 120px; height: 120px; object-fit: cover; border-radius: 50%; 
                        border: 4px solid #ddd;" >
          </div> {% endcomment %}
      
          <div class="innerDiv" style="padding: 1rem; text-align: left;">
            <h4 style="color: #333; font-weight: 600; margin-bottom: 0.5rem; text-align: center;">{{ item.name }}</h4>
            <hr style="border-top: 1px solid #ddd; margin: 0.5rem 0;">
            <p style="color: #555; font-size: 1rem;"><strong>Production:</strong> {{ item.quantity }}</p>
            <p style="color: #555; font-size: 1rem;"><strong>Price (Estimate):</strong> {{ item.price }}</p>
            <p style="color: #555; font-size: 1rem;"><strong>Started:</strong> {{ item.created }}</p>
      
            <div style="margin-top: 1rem;">
              <form action="/farmer/removeCrop/{{ item.id }}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger" 
                        style="width: 100%; padding: 0.6rem; border-radius: 6px; font-weight: 500; 
                               background-color: #d9534f; border: none;">
                  Remove
                </button>
              </form>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      
      
    
    {% comment %} <div class="card-sl">
      <div class="card-text">
          <b>Crop</b>: {{item.name}}
      </div>
      <div class="card-text">
          <b>Production</b>: {{item.quantity}}
      </div>
      <div class="card-text">
          <b>Price</b>:  {{item.price}}
      </div>
      <div class="card-text">
          <b>Started</b>: May 30 2021
      </div>
        <form action = "/farmer/removeCrop/{{item.id}}" method = "POST">
          {% csrf_token %}
          <button  class="card-button" type = "submit">Remove</button>
        </form>
  </div> {% endcomment %}
  {% comment %} <div class="card border-0 shadow-lg rounded-4 p-4" style="max-width: 24rem;">
    <div class="card-body text-center">
        <h4 class="card-title fw-bold text-dark mb-3">{{ item.name }}</h4>
        <div class="d-flex justify-content-between text-secondary fw-semibold mb-2">
            <span>🌱 Production:</span> <span>{{ item.quantity }}</span>
        </div>
        <div class="d-flex justify-content-between text-secondary fw-semibold mb-2">
            <span>💰 Price:</span> <span>{{ item.price }}</span>
        </div>
        <div class="d-flex justify-content-between text-secondary fw-semibold mb-3">
            <span>📅 Started:</span> <span>May 30, 2021</span>
        </div>
      
        <form action="/farmer/removeCrop/{{ item.id }}" method="POST">
            {% csrf_token %}
            <button class="btn btn-danger w-100 fw-bold shadow-sm py-2 d-flex align-items-center justify-content-center gap-2">
                <i class="bi bi-trash3-fill"></i> Remove Crop
            </button>
          </form>
    </div>
</div> {% endcomment %}





    {% comment %} {% endfor %}
    
    </div> {% endcomment %}
    <!-- <div id="overlay">
    <div style="width:30rem;height:10rem;background: rgba(255, 255, 255, 0.25);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 10px;
    color: rgb(0, 0, 0);position:absolute;top:10rem;left:26rem;border-radius: 0.5rem;">
        <div class = "row">
          <div class="col-md-12" style="padding-left:6rem;font-size:1.5rem;padding-top:2rem;font-weight: bold;">
            A new Crop has been added
          </div>
          <div class="col-md-12" style="padding-left:13.5rem;padding-top:2rem;">
            <button class="btn btn-primary" onclick="off('overlay')">Close</button>
          </div>
        </div>
    </div>
  </div> -->
    {% comment %} {% if newCrop %}
    <div id="overlay">
      <div style="width:30rem;height:10rem;background: rgba(255, 255, 255, 0.25);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 10px;
      color: rgb(0, 0, 0);position:absolute;top:10rem;left:26rem;border-radius: 0.5rem;">
          <div class = "row">
            <div class="col-md-12" style="padding-left:6rem;font-size:1.5rem;padding-top:2rem;font-weight: bold;">
              A new Crop has been added
            </div>
            <div class="col-md-12" style="padding-left:13.5rem;padding-top:2rem;">
              <button class="btn btn-primary" onclick="off('overlay')"  style="background-color: #50C878;border: 1px solid #50C878;">Close</button>
            </div>
          </div>
      </div>
    </div>
    {% endif %}

    {% if itemDel %}
    <div id="overlay2">
      <div style="width:30rem;height:10rem;background: rgba(255, 255, 255, 0.25);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 10px;
      color: rgb(0, 0, 0);position:absolute;top:10rem;left:26rem;border-radius: 0.5rem;">
          <div class = "row">
            <div class="col-md-12" style="padding-left:6rem;font-size:1.5rem;padding-top:2rem;font-weight: bold;">
              Crop has been removed
            </div>
            <div class="col-md-12" style="padding-left:13.5rem;padding-top:2rem;">
              <button class="btn btn-primary" onclick="off('overlay2')" style="background-color: #50C878;border: 1px solid #50C878;">Close</button>
            </div>
          </div>
      </div>
    </div>
    {% endif %} {% endcomment %}
    {% if newCrop %}
<div id="overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: rgba(0, 0, 0, 0.3); display: flex; align-items: center; justify-content: center; z-index: 1000;">
  <div style="width: 30rem; padding: 2rem; background: rgba(255, 255, 255, 0.3); 
              box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37); backdrop-filter: blur(10px); 
              border-radius: 12px; text-align: center; color: #000;">
    <h3 style="font-weight: bold; margin-bottom: 1.5rem;">A new crop has been added!</h3>
    <button class="btn btn-success" onclick="off('overlay')" 
            style="background-color: #50C878; border: none; padding: 0.7rem 1.5rem; border-radius: 6px; font-size: 1rem;">
      Close
    </button>
  </div>
</div>
{% endif %}

{% if itemDel %}
<div id="overlay2" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: rgba(0, 0, 0, 0.3); display: flex; align-items: center; justify-content: center; z-index: 1000;">
  <div style="width: 30rem; padding: 2rem; background: rgba(255, 255, 255, 0.3); 
              box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37); backdrop-filter: blur(10px); 
              border-radius: 12px; text-align: center; color: #000;">
    <h3 style="font-weight: bold; margin-bottom: 1.5rem;">Crop has been removed</h3>
    <button class="btn btn-success" onclick="off('overlay2')" 
            style="background-color: #50C878; border: none; padding: 0.7rem 1.5rem; border-radius: 6px; font-size: 1rem;">
      Close
    </button>
  </div>
</div>
{% endif %}

  </div>
</div>
</div>
</div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script>
  let disabled = true;
  var editField = function(){
    disabled = !disabled;
    document.getElementById('firstname').disabled = disabled;
    document.getElementById('address').disabled = disabled;
    document.getElementById('state').disabled = disabled;
    document.getElementById('area').disabled = disabled;
    document.getElementById('Phoneno').disabled = disabled;
    document.getElementById('email').disabled = disabled;
    document.getElementById('profileSubmit').disabled = disabled;
    if(disabled)
    {
      document.getElementById('editBtn').innerHTML = 'Edit';
    }
    else
    {
      document.getElementById('editBtn').innerHTML = 'Cancel';
    }
    
    
  }

  console.log('output is:','{{crops}}')
function on() {
  document.getElementById("overlay").style.display = "block";
}

function off(id) {
  document.getElementById(id).style.display = "none";
}
</script>

  </body>
</html>
